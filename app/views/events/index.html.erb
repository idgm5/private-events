<p id="notice"><%= notice %></p>

<h1>Events</h1>
<% if session[:current_user_id].is_a? Integer %>
  <h3>Current Profile: <%= link_to "#{@user.name}", @user %> | <%= link_to 'Send invitations', new_attendance_path %> | <%= link_to 'New event', new_event_path %>  |  <%= link_to 'Log out', log_out_path, method: :delete %></h3>  
<% else %>
  <%= link_to 'Sign up', new_user_path %> |  <%= link_to 'Sign in', sign_in_path %>
     
<% end %>




<table>
  <thead>
    <tr>
      <th colspan="3"></th>
    </tr>
  </thead>
  <tbody>
    <h3>Upcomming Events:</h3>
    <% @upcoming_events.each do |event| %>
      <tr>
        <td>
          <%= event.description %>
          |
          <%= link_to 'Show', event %>
          <% if session[:current_user_id].is_a? Integer %>
          |
          <%= link_to 'Assist', assist_path(event_id: event, user_id: session[:current_user_id]), method: :put, data: { confirm: 'Do you want to assist to this event?' } %>
          <% end %>
          <%  if event.creator.id == session[:current_user_id] %>
            |
            <%= link_to 'Delete', event_path(event), data: {confirm: "Delete event?"}, method: :delete %>
          <% end %>
        </td>
      </tr>
      <tr>
        <td>
          <p>Hosted by: <%= link_to "#{event.creator.name}", event.creator %></p>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
<br/>
<table>
  <thead>
    <tr>
      <th colspan="3"></th>
    </tr>
  </thead>
  <tbody>
    <h3>Previous Events:</h3>
    <% @prev_events.each do |event| %>
      <tr>
        <td>
          <%= event.description %>
          |
          <%= link_to 'Show', event %>
          <% if session[:current_user_id].is_a? Integer %>
          |
          <%= link_to 'Assist', assist_path(event_id: event, user_id: session[:current_user_id]), method: :put, data: { confirm: 'Do you want to assist to this event?' } %>
          <% end %>
          <%  if event.creator.id == session[:current_user_id] %>
          |
          <%= link_to 'Delete', event_path(event), data: {confirm: "Delete event?"}, method: :delete %>
          <% end %>
        </td>
      </tr>
      <tr>
        <td>
          <p>Hosted by: <%= link_to "#{event.creator.name}", event.creator %></p>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
<br>
